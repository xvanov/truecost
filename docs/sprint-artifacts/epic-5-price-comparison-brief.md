# Project Brief — AI-Powered Construction Product Price Comparison Module

## Project Name

**TrueCost Price Intelligence Module** (Integrated with TrueCost Estimation System)

---

## Executive Summary

The Price Intelligence Module is an AI-driven extension to the TrueCost estimation system. After the main estimation pipeline produces a Bill of Materials (BOM), this module allows users to instantly compare material prices across major retailers (e.g., Home Depot, Lowe's, Ace Hardware) and view the optimal product recommendation for each item in their project.

Unlike traditional price comparison tools, this module leverages real-time data extraction via the Unwrangle API combined with LLM-based product matching. Instead of requiring manual confirmation or strict SKU matching, the system uses AI reasoning to select the best substitute product that meets the project requirements — even when brand, format, or naming conventions differ across stores.

This feature enhances the value of TrueCost by providing transparency, cost savings, and data-driven decision support during the purchasing and planning phase.

---

## Problem Statement

Contractors and homeowners often spend hours manually checking prices across multiple stores to find cost-effective materials. Retailers use different naming conventions, product variations, and inconsistent metadata, making direct comparisons difficult.

Current challenges include:

* No centralized place to compare product prices.
* Inconsistent product naming and missing universal identifiers.
* Time-consuming manual verification of substitutes.
* Frequent price fluctuations and inconsistencies between retailers.

The Price Intelligence Module solves this by:

* Automatically sourcing real-time product data.
* Using AI to interpret and match products.
* Presenting users with the best-price option that fits their project needs.

---

## Project Goals

1. **Automate multi-retailer price comparison** for all products generated by the estimation pipeline.
2. **Use LLM reasoning** to determine the best product match from each retailer.
3. **Display unified price comparison results** in an easy-to-read table.
4. **Operate with no manual confirmation** — AI autonomously selects the best candidate.
5. **Minimize user friction** by embedding the feature seamlessly into the TrueCost UI.

---

## Core Features

### 1. "Compare Product Prices" Trigger

* A button appears on the Final Estimate screen.
* When clicked, a new process begins for all items in the BOM.

### 2. Multi-Retailer Product Search (via Unwrangle API)

For each product name in the estimation output:

* Query top N product results from each retailer using their respective search endpoints.
* Extract product details (title, description, dimensions, specs, price, availability, URL).
* Store results in structured JSON format.

### 3. AI-Powered Product Matching

A specialized AI agent evaluates:

* The project description and user requirements.
* The original product name.
* Top N retailer candidates (with full metadata).

LLM selects **one best-fitting product per retailer** or determines a single optimal product overall, based on:

* Functional similarity.
* Specification compatibility.
* Price and availability.
* Material quality indicators.

### 4. Automated Selection — No Human Review

* AI chooses a single recommended product.
* No manual confirmation step in MVP.
* Selection logic is transparent and logged internally.

### 5. Price Comparison Table

For each BOM product:

* Display recommended product name.
* Show retailer, price, and link.
* Include optional metadata (dimensions, specs).
* Provide total savings summary.

---

## User Flow

1. User completes estimation → receives BOM list.
2. User clicks **“Compare Product Prices”** button.
3. System extracts all product names.
4. Retailer search queries run in batch or sequentially.
5. AI agent analyzes candidates and selects best match.
6. Final price comparison table displayed.
7. User may export, save, or integrate prices into the estimate.

---

## Technical Architecture

### Components

* **Unwrangle API**: Fetch product data from retailers.
* **AI Matching Agent**: LLM-powered product evaluator.
* **Batch Processor**: Manages product list iteration.
* **Normalizer**: Cleans, structures, and standardizes retailer data.
* **UI Module**: Renders comparison table.

### Data Flow

```
Estimation Output (BOM)
        ↓
Product Name List
        ↓
Unwrangle Search Queries (HD, Lowe's, Ace)
        ↓
Top N Candidates per Retailer
        ↓
LLM Matching Agent
        ↓
Best Match Selection
        ↓
Comparison Table in UI
```

### Performance Considerations

* Batched LLM calls for efficiency.
* Caching product matches to reduce repeat API costs.
* Rate-limiting Unwrangle API calls.

---

## Constraints & Assumptions

* No user-in-the-loop confirmation in MVP.
* No fine-tuned ML models; rely solely on LLM via API.
* Product mapping does not require exact brand matching.
* Retailer coverage depends on Unwrangle’s supported platforms.
* Network latency may affect comparison speed.

---

## Risks & Mitigations

| Risk                       | Mitigation                                    |
| -------------------------- | --------------------------------------------- |
| AI picks suboptimal match  | Improve prompts; add hidden scoring logic     |
| Inconsistent retailer data | Normalize fields before LLM analysis          |
| High API usage cost        | Implement caching and batching                |
| Ambiguous product names    | Include project context in prompt for clarity |
| Long processing times      | Parallelize external API calls                |

---

## Success Criteria

* 90%+ of BOM items successfully matched.
* Accurate price retrieval from all supported retailers.
* End-to-end comparison generated within acceptable timeframe (< 15 seconds for small BOM, < 40 seconds for large BOM).
* Users report reduced time spent sourcing materials.
* Increased engagement with estimation results.

---

## Deliverables

* Functional API integration with Unwrangle.
* AI matching agent implementation.
* UI comparison table.
* Logging & monitoring utilities.
* Internal documentation and API schema.

---

## Timeline (Proposed)

**Week 1:** Architecture, data flow, Unwrangle integration tests

**Week 2:** AI matching agent, prompt design, selection logic

**Week 3:** UI implementation, caching, error handling

**Week 4:** Testing (unit + integration), optimization, deployment

---

## Future Enhancements

* Manual override UI for edge-case matching.
* Ability to compare multiple candidate substitutes.
* Historical price tracking and forecasting.
* Integration with supplier APIs for bulk purchase pricing.
* Support for regional/local hardware stores.

---

## Summary

The Price Intelligence Module extends TrueCost’s value by automating a traditionally tedious step in the construction workflow: sourcing competitively priced materials. Leveraging real-time retailer data and AI-powered reasoning, users receive actionable, project-specific product recommendations with minimal effort.

This module strengthens TrueCost’s positioning as a fully intelligent construction estimation platform and opens the door for future procurement automation.
